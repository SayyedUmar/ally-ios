//
//  PluginTest.swift
//  Capacitor
//
//  Created by Umar Sayyed on 15/08/20.
//

import Foundation
//import UIKit
import Capacitor
//import Photos

@objc(PluginTest)
public class PluginTest: CAPPlugin {

    @objc func getLastPhotoTaken(_ call: CAPPluginCall) {

//        let fetchOptions = PHFetchOptions()
//        fetchOptions.sortDescriptors = [NSSortDescriptor(key: "creationDate", ascending: false)]
//        fetchOptions.fetchLimit = 1
//
//        let fetchResult = PHAsset.fetchAssets(with: .image, options: fetchOptions)
//        let image = getAssetThumbnail(asset: fetchResult.object(at: 0))
//        guard let imageData = image.pngData() else {return}
//        let base64String = imageData.base64EncodedString()

        call.success([
            "image": "test"
        ])

    }

//    func getAssetThumbnail(asset: PHAsset) -> UIImage {
//
//        let manager = PHImageManager.default()
//        let option = PHImageRequestOptions()
//
//        var thumbnail = UIImage()
//        option.isSynchronous = true
//
//        manager.requestImage(for: asset, targetSize: CGSize(width: 500, height: 500), contentMode: .aspectFit, options: option, resultHandler: {(result, info)->Void in
//            thumbnail = result!
//        })
//
//        return thumbnail
//    }

}
